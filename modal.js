/* ============================================================
   FULL GAME DATA SET (54 entries)
   ============================================================ */

const gameData = {
  /* ------------------ 18 POEM GAMES ------------------ */
  poem1:{ type:"digital", title:"Fireworks Across Time", play:"https://sudhakar-g.itch.io/fireworks-across-time", screenshots:["img/Game Poems/Fireworks Across the Sky/Screenshot1.png","img/Game Poems/Fireworks Across the Sky/Screenshot2.png","img/Game Poems/Fireworks Across the Sky/Screenshot3.png"], description:"“Fireworks Across Time” is an emotional journey through Diwali across the years. As the player grows older, friends drift away and celebrations fade, leaving only memories of laughter and light. This reflective experience captures the bittersweet truth of growing up — that even when the world changes, the glow of Diwali stays in our hearts." },
  poem2:{ type:"digital", title:"Poem 2", play:"poems/poem2/index.html", screenshots:["/mnt/data/website.png","/mnt/data/website.png"], description:"Poem 2 description." },
  poem3:{ type:"digital", title:"Poem 3", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 3 description." },
  poem4:{ type:"digital", title:"Poem 4", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 4 description." },
  poem5:{ type:"digital", title:"Poem 5", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 5 description." },
  poem6:{ type:"digital", title:"Poem 6", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 6 description." },
  poem7:{ type:"digital", title:"Poem 7", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 7 description." },
  poem8:{ type:"digital", title:"Poem 8", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 8 description." },
  poem9:{ type:"digital", title:"Poem 9", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 9 description." },
  poem10:{ type:"digital", title:"Poem 10", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 10 description." },
  poem11:{ type:"digital", title:"Poem 11", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 11 description." },
  poem12:{ type:"digital", title:"Poem 12", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 12 description." },
  poem13:{ type:"digital", title:"Poem 13", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 13 description." },
  poem14:{ type:"digital", title:"Poem 14", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 14 description." },
  poem15:{ type:"digital", title:"Poem 15", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 15 description." },
  poem16:{ type:"digital", title:"Poem 16", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 16 description." },
  poem17:{ type:"digital", title:"Poem 17", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 17 description." },
  poem18:{ type:"digital", title:"Poem 18", play:"#", screenshots:["/mnt/data/website.png"], description:"Poem 18 description." },

  /* ------------------ 18 PONG GAMES ------------------ */
  pong1:{ type:"digital", title:"Casualism", play:"https://sudhakar-g.itch.io/pong-casualism", screenshots:["img/Pong/Casualism/Screenshot1.png","img/Pong/Casualism/Screenshot2.png","img/Pong/Casualism/Screenshot3.png"], description:"This isn’t your ordinary Pong match — it’s a playful experiment in chaos and chance. In this game inspired by Casualism, control and meaning are illusions. Every time the ball hits a paddle, reality shifts: the ball speeds up or slows down, paddles stretch or shrink, and sometimes your controls betray you. Illusions of extra balls flicker across the screen, player lives swap without warning, and walls no longer behave as they should.\n\nEach rally becomes a meditation on unpredictability — a contest not just of reflexes, but of adaptability. You can’t master chance, only flow with it. In the spirit of Casualism, winning or losing is beside the point; it’s all about how you handle the absurd." },
  pong2:{ type:"digital", title:"Pong 2", play:"pong/p2/index.html", screenshots:["/mnt/data/website.png","/mnt/data/website.png"], description:"Pong 2 description." },
  pong3:{ type:"digital", title:"Pong 3", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 3 description." },
  pong4:{ type:"digital", title:"Pong 4", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 4 description." },
  pong5:{ type:"digital", title:"Pong 5", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 5 description." },
  pong6:{ type:"digital", title:"Pong 6", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 6 description." },
  pong7:{ type:"digital", title:"Pong 7", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 7 description." },
  pong8:{ type:"digital", title:"Pong 8", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 8 description." },
  pong9:{ type:"digital", title:"Pong 9", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 9 description." },
  pong10:{ type:"digital", title:"Pong 10", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 10 description." },
  pong11:{ type:"digital", title:"Pong 11", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 11 description." },
  pong12:{ type:"digital", title:"Pong 12", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 12 description." },
  pong13:{ type:"digital", title:"Pong 13", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 13 description." },
  pong14:{ type:"digital", title:"Pong 14", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 14 description." },
  pong15:{ type:"digital", title:"Pong 15", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 15 description." },
  pong16:{ type:"digital", title:"Pong 16", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 16 description." },
  pong17:{ type:"digital", title:"Pong 17", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 17 description." },
  pong18:{ type:"digital", title:"Pong 18", play:"#", screenshots:["/mnt/data/website.png"], description:"Pong 18 description." },

  /* ------------------ 18 NON-DIGITAL GAMES ------------------ */
  nondig1:{ type:"nondigital", title:"ND 1", description:"ND 1 short description.",screenshots:["/mnt/data/website.png","/mnt/data/website.png","/mnt/data/website.png"], video:"video/nondigital/Comp 1.mp4", rulebook:"pdf/nondigital/Play Maxx v2.pdf" },
  nondig2:{ type:"nondigital", title:"ND 2", description:"ND 2 short description.", screenshots:["/mnt/data/website.png","/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig3:{ type:"nondigital", title:"ND 3", description:"ND 3 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig4:{ type:"nondigital", title:"ND 4", description:"ND 4 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig5:{ type:"nondigital", title:"ND 5", description:"ND 5 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig6:{ type:"nondigital", title:"ND 6", description:"ND 6 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig7:{ type:"nondigital", title:"ND 7", description:"ND 7 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig8:{ type:"nondigital", title:"ND 8", description:"ND 8 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig9:{ type:"nondigital", title:"ND 9", description:"ND 9 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig10:{ type:"nondigital", title:"ND 10", description:"ND 10 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig11:{ type:"nondigital", title:"ND 11", description:"ND 11 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig12:{ type:"nondigital", title:"ND 12", description:"ND 12 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig13:{ type:"nondigital", title:"ND 13", description:"ND 13 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig14:{ type:"nondigital", title:"ND 14", description:"ND 14 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig15:{ type:"nondigital", title:"ND 15", description:"ND 15 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig16:{ type:"nondigital", title:"ND 16", description:"ND 16 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig17:{ type:"nondigital", title:"ND 17", description:"ND 17 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" },
  nondig18:{ type:"nondigital", title:"ND 18", description:"ND 18 short description.",screenshots:["/mnt/data/website.png"], video:"/mnt/data/website.png", rulebook:"/mnt/data/website.png" }
};



/* ============================================================
   MODAL LOGIC (no arrows)
   ============================================================ */
/* ============================================================
   Screenshot Navigation State
   ============================================================ */

let currentScreens = [];      // array of screenshots for current modal
let currentShotIndex = 0;     // which screenshot is visible


/* ============================================================
   Modal Logic
   ============================================================ */

document.addEventListener('DOMContentLoaded', () => {

  const modal = document.getElementById('gameModal');

  const modalTitle = document.getElementById('modalTitle');
  const modalDescription = document.getElementById('modalDescription');
  const modalPlay = document.getElementById('modalPlay');
  const modalVideo = document.getElementById('modalVideo');
  const modalPDF = document.getElementById('modalPDF');

  const videoTitle = document.getElementById('videoTitle');
  const pdfTitle = document.getElementById('pdfTitle');

  // NEW screenshot system
  const modalScreenshot = document.getElementById('modalScreenshot');
  const prevShot = document.getElementById('prevShot');
  const nextShot = document.getElementById('nextShot');


  /* ====================================================
     OPEN MODAL
     ==================================================== */
  window.openGameModal = function (key) {
    const data = typeof key === 'string' ? gameData[key] : key;
    if (!data) return;

    modalTitle.textContent = data.title || "";

    /* ----------------------------
       SCREENSHOTS (NEW SYSTEM)
       ---------------------------- */
    currentScreens = data.screenshots || [];
    currentShotIndex = 0;
    updateScreenshot();


    /* ----------------------------
       DIGITAL GAMES
       ---------------------------- */
    if (data.type === "digital") {

      modalPlay.style.display = "inline-block";
      modalPlay.href = data.play;

      modalDescription.style.display = "block";
      modalDescription.textContent = data.description || "";

      modalVideo.style.display = "none";
      modalPDF.style.display = "none";
      //videoTitle.style.display = "none";
      //pdfTitle.style.display = "none";
    }

    /* ----------------------------
       NON-DIGITAL GAMES
       ---------------------------- */
    else if (data.type === "nondigital") {

      modalPlay.style.display = "none";

      modalDescription.style.display = "block";
      modalDescription.textContent = data.description || "No description provided.";

      // VIDEO
      if (data.video) {
        modalVideo.src = data.video;
        modalVideo.style.display = "block";
        videoTitle.style.display = "block";
      } else {
        modalVideo.style.display = "none";
        videoTitle.style.display = "none";
      }

      // RULEBOOK
      if (data.rulebook) {
        modalPDF.src = data.rulebook;
        modalPDF.style.display = "block";
        pdfTitle.style.display = "block";
      } else {
        modalPDF.style.display = "none";
        pdfTitle.style.display = "none";
      }
    }

    modal.style.display = "flex";
  };



  /* ====================================================
     UPDATE SCREENSHOT based on index
     ==================================================== */
  function updateScreenshot() {
    if (currentScreens.length === 0) {
      modalScreenshot.src = "";
      return;
    }
    modalScreenshot.src = currentScreens[currentShotIndex];
  }


  /* ====================================================
     BUTTON NAVIGATION
     ==================================================== */
  prevShot.addEventListener("click", () => {
    if (currentScreens.length > 0) {
      currentShotIndex = (currentShotIndex - 1 + currentScreens.length) % currentScreens.length;
      updateScreenshot();
    }
  });

  nextShot.addEventListener("click", () => {
    if (currentScreens.length > 0) {
      currentShotIndex = (currentShotIndex + 1) % currentScreens.length;
      updateScreenshot();
    }
  });


  /* ====================================================
     KEYBOARD NAVIGATION
     ==================================================== */
  document.addEventListener("keydown", (e) => {
    if (modal.style.display === "flex") {
      if (e.key === "ArrowLeft") {
        prevShot.click();
      }
      if (e.key === "ArrowRight") {
        nextShot.click();
      }
      if (e.key === "Escape") {
        modal.style.display = "none";
        modalVideo.pause();
      }
    }
  });



  /* ====================================================
     CLOSE MODAL
     ==================================================== */
  document.querySelector('.close-modal').addEventListener("click", () => {
    modal.style.display = "none";
    modalVideo.pause();
  });

  modal.addEventListener("click", (e) => {
    if (!document.querySelector(".modal-content").contains(e.target)) {
      modal.style.display = "none";
      modalVideo.pause();
    }
  });

});
